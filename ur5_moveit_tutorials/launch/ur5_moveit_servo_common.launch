<?xml version="1.0"?>
<launch>
    <arg name="controller" doc="Which additional controller to launch"/>
    <arg name="servo_params_file" doc="The servo parameters configuration file"/>
    <include file="$(find ur_gazebo)/launch/ur5_bringup.launch">
        <arg name="controllers" value="joint_state_controller $(arg controller)"/>
        <arg name="stopped_controllers" value=""/>
        <arg name="transmission_hw_interface" value="hardware_interface/PositionJointInterface"/>
        <arg name="paused" value="true"/>
        <arg name="initial_joint_positions" 
            value=" -J shoulder_pan_joint -5.62  -J shoulder_lift_joint -1.785 -J elbow_joint 1.625 -J wrist_1_joint -2.737 -J wrist_2_joint 5.707 -J wrist_3_joint -3.92"/>
    </include>        
    <include file="$(find ur5_moveit_config)/launch/moveit_planning_execution.launch">
        <arg name="sim" value="true"/>
        <arg name="controller_name" value="$(arg controller)"/>
    </include>

    <node name="$(anon rviz)" pkg="rviz" type="rviz" respawn="false"
        args="-d $(find ur5_moveit_tutorials)/config/moveit_servo.rviz" output="screen">
        <rosparam command="load" file="$(find ur5_moveit_config)/config/kinematics.yaml"/>
    </node>

    <!-- Include servo -->
    <node name="servo_server" pkg="moveit_servo" type="servo_server" output="screen" >
        <rosparam command="load" file="$(arg servo_params_file)"/>
    </node>

</launch>